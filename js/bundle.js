!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";var s,n=(s=i(18))&&"object"==typeof s&&"default"in s?s.default:s;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.exports=n},function(t,e,i){"use strict";i.r(e),i.d(e,"__extends",function(){return n}),i.d(e,"__assign",function(){return a}),i.d(e,"__rest",function(){return r}),i.d(e,"__decorate",function(){return o}),i.d(e,"__param",function(){return l}),i.d(e,"__metadata",function(){return u}),i.d(e,"__awaiter",function(){return h}),i.d(e,"__generator",function(){return c}),i.d(e,"__exportStar",function(){return f}),i.d(e,"__values",function(){return p}),i.d(e,"__read",function(){return d}),i.d(e,"__spread",function(){return g}),i.d(e,"__await",function(){return m}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return b}),i.d(e,"__asyncValues",function(){return v}),i.d(e,"__makeTemplateObject",function(){return w}),i.d(e,"__importStar",function(){return S}),i.d(e,"__importDefault",function(){return x});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var a=function(){return(a=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function r(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&(i[s[n]]=t[s[n]])}return i}function o(t,e,i,s){var n,a=arguments.length,r=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(r=(a<3?n(r):a>3?n(e,i,r):n(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}function l(t,e){return function(i,s){e(i,s,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,i,s){return new(i||(i=Promise))(function(n,a){function r(t){try{l(s.next(t))}catch(t){a(t)}}function o(t){try{l(s.throw(t))}catch(t){a(t)}}function l(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(r,o)}l((s=s.apply(t,e||[])).next())})}function c(t,e){var i,s,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(n=2&a[0]?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,s=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],s=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function f(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function d(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,n,a=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(s=a.next()).done;)r.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function y(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=i.apply(t,e||[]),a=[];return s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(t){n[t]&&(s[t]=function(e){return new Promise(function(i,s){a.push([t,e,i,s])>1||o(t,e)})})}function o(t,e){try{(i=n[t](e)).value instanceof m?Promise.resolve(i.value.v).then(l,u):h(a[0][2],i)}catch(t){h(a[0][3],t)}var i}function l(t){o("next",t)}function u(t){o("throw",t)}function h(t,e){t(e),a.shift(),a.length&&o(a[0][0],a[0][1])}}function b(t){var e,i;return e={},s("next"),s("throw",function(t){throw t}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(s,n){e[s]=t[s]?function(e){return(i=!i)?{value:m(t[s](e)),done:"return"===s}:n?n(e):e}:n}}function v(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=p(t),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise(function(s,n){(function(t,e,i,s){Promise.resolve(s).then(function(e){t({value:e,done:i})},e)})(s,n,(e=t[i](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){t.exports=i(22)},function(t,e,i){t.exports=i.p+"img/box_background.png"},function(t,e,i){t.exports=i.p+"img/box.png"},function(t,e,i){t.exports=i.p+"img/coins.jpg"},function(t,e,i){t.exports=i.p+"img/favicon.ico"},function(t,e,i){t.exports=i.p+"img/frame_background.png"},function(t,e,i){t.exports=i.p+"img/loading.gif"},function(t,e,i){t.exports=i.p+"img/menu_800x600.jpg"},function(t,e,i){t.exports=i.p+"img/modal_background.jpg"},function(t,e,i){t.exports=i.p+"img/pause.png"},function(t,e,i){t.exports=i.p+"img/sheet_objects_heroes.png"},function(t,e,i){t.exports=i.p+"img/texture.png"},function(t,e,i){t.exports=i.p+"font/Nautilus.otf"},function(t,e,i){t.exports=i.p+"font/SHPinscher-Regular.otf"},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=i(1),a=i(19),r=i(21),o=((s={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",s["bad-app-name"]="Illegal App name: '{$appName}",s["duplicate-app"]="Firebase App named '{$appName}' already exists",s["app-deleted"]="Firebase App named '{$appName}' already deleted",s["duplicate-service"]="Firebase service named '{$appName}' already registered",s["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",s),l=new a.ErrorFactory("app","Firebase",o),u="[DEFAULT]",h=[],c=function(){function t(t,e,i){this.firebase_=i,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){h.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){h=h.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){var e,i,s,a;t.firebase_.INTERNAL.removeApp(t.name_);var r=[];try{for(var o=n.__values(Object.keys(t.services_)),l=o.next();!l.done;l=o.next()){var u=l.value;try{for(var h=n.__values(Object.keys(t.services_[u])),c=h.next();!c.done;c=h.next()){var f=c.value;r.push(t.services_[u][f])}}catch(t){s={error:t}}finally{try{c&&!c.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return Promise.all(r.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=u),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var i=e!==u?e:void 0,s=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),i);this.services_[t][e]=s}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;a.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(h.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),h=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var f="6.3.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p=new r.Logger("@firebase/app");if(a.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=function(t){var e={},i={},s={},r={__esModule:!0,initializeApp:function(i,s){if(void 0===s&&(s={}),"object"!=typeof s||null===s){var n=s;s={name:n}}var o=s;void 0===o.name&&(o.name=u);var h=o.name;if("string"!=typeof h||!h)throw l.create("bad-app-name",{appName:String(h)});if(a.contains(e,h))throw l.create("duplicate-app",{appName:h});var f=new t(i,o,r);return e[h]=f,c(f,"create"),f},app:o,apps:null,SDK_VERSION:f,INTERNAL:{registerService:function(e,n,u,c,f){if(void 0===f&&(f=!1),i[e])throw l.create("duplicate-service",{appName:e});function p(t){if(void 0===t&&(t=o()),"function"!=typeof t[e])throw l.create("invalid-app-argument",{appName:e});return t[e]()}return i[e]=n,c&&(s[e]=c,h().forEach(function(t){c("create",t)})),void 0!==u&&a.deepExtend(p,u),r[e]=p,t.prototype[e]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return this._getService.bind(this,e).apply(this,f?t:[])},p},removeApp:function(t){c(e[t],"delete"),delete e[t]},factories:i,useAsService:p}};function o(t){if(t=t||u,!a.contains(e,t))throw l.create("no-app",{appName:t});return e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function c(t,e){var a,r;try{for(var o=n.__values(Object.keys(i)),l=o.next();!l.done;l=o.next()){var u=p(0,l.value);if(null===u)return;s[u]&&s[u](e,t)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}}function p(t,e){return"serverAuth"===e?null:e}return r.default=r,Object.defineProperty(r,"apps",{get:h}),o.App=t,r}(c);return e.INTERNAL=n.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),m=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\n      to false and "main" to true:\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,t)};var y=g;e.default=y,e.firebase=y},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(t,e){if(!t)throw r(e)},r=function(t){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){for(var e=[],i=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);n<128?e[i++]=n:n<2048?(e[i++]=n>>6|192,e[i++]=63&n|128):55296==(64512&n)&&s+1<t.length&&56320==(64512&t.charCodeAt(s+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++s)),e[i++]=n>>18|240,e[i++]=n>>12&63|128,e[i++]=n>>6&63|128,e[i++]=63&n|128):(e[i++]=n>>12|224,e[i++]=n>>6&63|128,e[i++]=63&n|128)}return e},l=function(){function t(){this.byteToCharMap_=null,this.charToByteMap_=null,this.byteToCharMapWebSafe_=null,this.charToByteMapWebSafe_=null,this.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",this.HAS_NATIVE_SUPPORT="function"==typeof atob}return Object.defineProperty(t.prototype,"ENCODED_VALS",{get:function(){return this.ENCODED_VALS_BASE+"+/="},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ENCODED_VALS_WEBSAFE",{get:function(){return this.ENCODED_VALS_BASE+"-_."},enumerable:!0,configurable:!0}),t.prototype.encodeByteArray=function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[],n=0;n<t.length;n+=3){var a=t[n],r=n+1<t.length,o=r?t[n+1]:0,l=n+2<t.length,u=l?t[n+2]:0,h=a>>2,c=(3&a)<<4|o>>4,f=(15&o)<<2|u>>6,p=63&u;l||(p=64,r||(f=64)),s.push(i[h],i[c],i[f],i[p])}return s.join("")},t.prototype.encodeString=function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},t.prototype.decodeString=function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],i=0,s=0;i<t.length;){var n=t[i++];if(n<128)e[s++]=String.fromCharCode(n);else if(n>191&&n<224){var a=t[i++];e[s++]=String.fromCharCode((31&n)<<6|63&a)}else if(n>239&&n<365){var r=((7&n)<<18|(63&(a=t[i++]))<<12|(63&(o=t[i++]))<<6|63&t[i++])-65536;e[s++]=String.fromCharCode(55296+(r>>10)),e[s++]=String.fromCharCode(56320+(1023&r))}else{a=t[i++];var o=t[i++];e[s++]=String.fromCharCode((15&n)<<12|(63&a)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},t.prototype.decodeStringToByteArray=function(t,e){this.init_();for(var i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[],n=0;n<t.length;){var a=i[t.charAt(n++)],r=n<t.length?i[t.charAt(n)]:0,o=++n<t.length?i[t.charAt(n)]:64,l=++n<t.length?i[t.charAt(n)]:64;if(++n,null==a||null==r||null==o||null==l)throw Error();var u=a<<2|r>>4;if(s.push(u),64!==o){var h=r<<4&240|o>>2;if(s.push(h),64!==l){var c=o<<6&192|l;s.push(c)}}}return s},t.prototype.init_=function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}},t}(),u=function(t){try{return h.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},h=new l;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var i in e)e.hasOwnProperty(i)&&(t[i]=c(t[i],e[i]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i})}return t.prototype.wrapCallback=function(t){var e=this;return function(i,s){i?e.reject(i):e.resolve(s),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(i):t(i,s))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var d="FirebaseError",g=function(t){function e(i,s){var n=t.call(this,s)||this;return n.code=i,n.name=d,Object.setPrototypeOf(n,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,m.prototype.create),n}return s.__extends(e,t),e}(Error),m=function(){function t(t,e,i){this.service=t,this.serviceName=e,this.errors=i}return t.prototype.create=function(t){for(var e,i,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var r=n[0]||{},o=this.service+"/"+t,l=this.errors[t],u=l?function(t,e){return t.replace(y,function(t,i){var s=e[i];return null!=s?s.toString():"<"+i+"?>"})}(l,r):"Error",h=this.serviceName+": "+u+" ("+o+").",c=new g(o,h);try{for(var f=s.__values(Object.keys(r)),p=f.next();!p.done;p=f.next()){var d=p.value;"_"!==d.slice(-1)&&(d in c&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),c[d]=r[d])}}catch(t){e={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(e)throw e.error}}return c},t}();var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v=function(t){var e={},i={},s={},n="";try{var a=t.split(".");e=b(u(a[0])||""),i=b(u(a[1])||""),n=a[2],s=i.d||{},delete i.d}catch(t){}return{header:e,claims:i,data:s,signature:n}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var i=this.W_;if("string"==typeof t)for(var s=0;s<16;s++)i[s]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(s=0;s<16;s++)i[s]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(s=16;s<80;s++){var n=i[s-3]^i[s-8]^i[s-14]^i[s-16];i[s]=4294967295&(n<<1|n>>>31)}var a,r,o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],c=this.chain_[4];for(s=0;s<80;s++){s<40?s<20?(a=h^l&(u^h),r=1518500249):(a=l^u^h,r=1859775393):s<60?(a=l&u|h&(l|u),r=2400959708):(a=l^u^h,r=3395469782);n=(o<<5|o>>>27)+a+c+r+i[s]&4294967295;c=h,h=u,u=4294967295&(l<<30|l>>>2),l=o,o=n}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var i=e-this.blockSize,s=0,n=this.buf_,a=this.inbuf_;s<e;){if(0===a)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(n[a]=t.charCodeAt(s),++s,++a===this.blockSize){this.compress_(n),a=0;break}}else for(;s<e;)if(n[a]=t[s],++s,++a===this.blockSize){this.compress_(n),a=0;break}}this.inbuf_=a,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var s=0;for(i=0;i<5;i++)for(var n=24;n>=0;n-=8)t[s]=this.chain_[i]>>n&255,++s;return t},t}();var S=function(){function t(t,e){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(i)}).catch(function(t){i.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,i){var n,a=this;if(void 0===t&&void 0===e&&void 0===i)throw new Error("Missing Observer.");void 0===(n=function(t,e){var i,n;if("object"!=typeof t||null===t)return!1;try{for(var a=s.__values(e),r=a.next();!r.done;r=a.next()){var o=r.value;if(o in t&&"function"==typeof t[o])return!0}}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:i}).next&&(n.next=x),void 0===n.error&&(n.error=x),void 0===n.complete&&(n.complete=x);var r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{a.finalError?n.error(a.finalError):n.complete()}catch(t){}}),this.observers.push(n),r},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var i=this;this.task.then(function(){if(void 0!==i.observers&&void 0!==i.observers[t])try{e(i.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function x(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t,e,i){var s="";switch(e){case 1:s=i?"first":"First";break;case 2:s=i?"second":"Second";break;case 3:s=i?"third":"Third";break;case 4:s=i?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var n=t+" failed: ";return n+=s+" argument "}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e.CONSTANTS=n,e.Deferred=f,e.ErrorFactory=m,e.FirebaseError=g,e.Sha1=w,e.assert=a,e.assertionError=r,e.async=function(t,e){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];Promise.resolve(!0).then(function(){t.apply(void 0,s.__spread(i))}).catch(function(t){e&&e(t)})}},e.base64=h,e.base64Decode=u,e.base64Encode=function(t){var e=o(t);return h.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var i=new S(t,e);return i.subscribe.bind(i)},e.decode=v,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=k,e.getUA=p,e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=v(t).claims,i=Math.floor((new Date).getTime()/1e3),s=0,n=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?s=e.nbf:e.hasOwnProperty("iat")&&(s=e.iat),n=e.hasOwnProperty("exp")?e.exp:s+86400),!!i&&!!s&&!!n&&i>=s&&i<=n},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=b,e.map=function(t,e,i){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=e.call(i,t[n],n,t));return s}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){var e,i,n=[],a=function(t,e){Array.isArray(e)?e.forEach(function(e){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))};try{for(var r=s.__values(Object.entries(t)),o=r.next();!o.done;o=r.next()){var l=s.__read(o.value,2);a(l[0],l[1])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return n.length?"&"+n.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var i=t.split("=");e[i[0]]=i[1]}}),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,i++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],i=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);if(n>=55296&&n<=56319){var r=n-55296;a(++s<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(s)-56320)}n<128?e[i++]=n:n<2048?(e[i++]=n>>6|192,e[i++]=63&n|128):n<65536?(e[i++]=n>>12|224,e[i++]=n>>6&63|128,e[i++]=63&n|128):(e[i++]=n>>18|240,e[i++]=n>>12&63|128,e[i++]=n>>6&63|128,e[i++]=63&n|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,i,s){var n;if(s<e?n="at least "+e:s>i&&(n=0===i?"none":"no more than "+i),n)throw new Error(t+" failed: Was called with "+s+(1===s?" argument.":" arguments.")+" Expects "+n+".")},e.validateCallback=function(t,e,i,s){if((!s||i)&&"function"!=typeof i)throw new Error(k(t,e,s)+"must be a valid function.")},e.validateContextObject=function(t,e,i,s){if((!s||i)&&("object"!=typeof i||null===i))throw new Error(k(t,e,s)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(t,e,i,s){if((!s||i)&&"string"!=typeof i)throw new Error(k(t,e,s)+"must be a valid firebase namespace.")}}).call(this,i(20))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function s(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,n,a=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(s=a.next()).done;)r.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r}function n(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */i.r(e),i.d(e,"LogLevel",function(){return a}),i.d(e,"Logger",function(){return u}),i.d(e,"setLogLevel",function(){return h});var a,r=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(a||(a={}));var o=a.INFO,l=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(!(e<t.logLevel)){var r=(new Date).toISOString();switch(e){case a.DEBUG:case a.VERBOSE:console.log.apply(console,n(["["+r+"]  "+t.name+":"],i));break;case a.INFO:console.info.apply(console,n(["["+r+"]  "+t.name+":"],i));break;case a.WARN:console.warn.apply(console,n(["["+r+"]  "+t.name+":"],i));break;case a.ERROR:console.error.apply(console,n(["["+r+"]  "+t.name+":"],i));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=l,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,n([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,n([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,n([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,n([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,n([this,a.ERROR],t))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function h(t){r.forEach(function(e){e.logLevel=t})}},function(t,e,s){"use strict";s.r(e);s(3),s(4),s(5),s(6),s(7),s(8),s(9),s(10),s(11),s(12),s(13),s(14),s(15),s(16),s(17);var n=s(0);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}n.initializeApp({apiKey:"AIzaSyDbccidJ1gkbHlOarCaPQxLZB663DuEkoM",authDomain:"game-e444e.firebaseapp.com",databaseURL:"https://game-e444e.firebaseio.com",projectId:"game-e444e",storageBucket:"game-e444e.appspot.com",messagingSenderId:"1087306837571"});var l=n.firestore(),u=function(){function t(){a(this,t),this.MAX_WRITE=0,this.currentIP=null}return o(t,[{key:"updateLimit",value:function(){var t=this;this.timer=setTimeout(function e(){t.MAX_WRITE=0,this.timer=setTimeout(e,6e4)},6e4)}},{key:"updateUserData",value:function(t,e,i,s){if(this.MAX_WRITE>3)throw new Error("limit");this.MAX_WRITE++,this.currentIP=t||"no ip detected",l.collection("users").doc("user_".concat((i+e).replace(/\s/g,"").toLowerCase())).set({name:i,points:s,id:e.slice(1,e.length),ip:this.currentIP,realPlayer:!0}).catch(function(t){console.log(t.message)})}}]),t}(),h=function(){function t(){a(this,t),this.key="json"}return o(t,[{key:"getIP",value:function(t){fetch("https://api.ipify.org?format=".concat(this.key)).then(function(t){return t.json()}).then(function(t){t.ip?localStorage.IP=t.ip:localStorage.IP="no detected"}).catch(function(t){console.log(t.message)})}},{key:"getSpriteData",value:function(t){fetch("../storage/data.json").then(function(t){return t.json()}).then(function(e){return t.jsonData=e}).catch(function(t){console.log(t.message)})}}]),t}(),c=function(){function t(){a(this,t),this.effects=[],this.ctx=null,this.gainNode=null,this.loaded=!1,this.time=null,this.lastTime=null}return o(t,[{key:"init",value:function(){this.ctx=new AudioContext,this.gainNode=this.ctx.createGain?this.ctx.createGain():this.ctx.createGainNode(),this.gainNode.connect(this.ctx.destination),this.time=this.ctx.currentTime}},{key:"load",value:function(t,e){var i=this,s={},n=this;fetch(t).then(function(t){return t.arrayBuffer()}).then(function(a){i.ctx.decodeAudioData(a).then(function(i){s.name=e,s.path=t,s.buffer=i,s.loaded=!0,n.effects.push(s)}).then(function(){s.play=function(t,e){if(s.loaded){var i=n.ctx.createBufferSource();i.buffer=this.buffer,i.connect(n.gainNode),i.loop=t,n.gainNode.gain.value=e,i.start(0)}}})})}},{key:"stopAll",value:function(){this.gainNode.disconnect(),this.gainNode=this.ctx.createGain?this.ctx.createGain(0):this.ctx.createGainNode(0),this.gainNode.connect(this.ctx.destination)}}]),t}(),f=function(){function t(){a(this,t),this.linki=[],this.coordsMouseX=null,this.coordsMouseY=null}return o(t,[{key:"checkFrame",value:function(t){return this.coordsMouseX>t.pos[0]&&this.coordsMouseX<t.pos[0]+t.length[0]&&this.coordsMouseY>t.pos[1]&&this.coordsMouseY<t.pos[1]+t.length[1]}}]),t}(),p=function(){function t(){a(this,t),this.menu="menu",this.death="wait",this.rating="rating",this.play="play",this.startPlay="play-animation",this.pauseGame="pause",this.fade=1,this.loadingPercent=0,this.about={state:"loading",count:0,stageBossCount:0,stageExtraBossCount:0,stageNumber:0,lastTimeBull:0,requstCount:0,lastTime:0,lastTimeColl:0}}return o(t,[{key:"setRequstCount",value:function(t){return this.about.requstCount=t}},{key:"startGame",value:function(){return this.about.state=this.play}},{key:"startGameAnimation",value:function(t,e,i,s){return i.selectName=!1,this.music(s),this.updateGameStatus(e,t),e.setHealth(200),this.about.state=this.startPlay}},{key:"stopGame",value:function(){return this.about.state=this.death}},{key:"ratingGame",value:function(t){return t.selectName=!1,this.about.state=this.rating}},{key:"mainMenu",value:function(t,e){return e&&e.stopAll(),t.selectName=!1,this.about.state=this.menu}},{key:"pause",value:function(t,e){return!!(e||t&&t.selectName)&&(t.selectName=!1,this.about.state=this.pauseGame,!0)}},{key:"spawnAndLvling",value:function(t,e,i,s,n){var a=i.createEnemy;t.about.stageNumber=s;var r=n.effects.find(function(t){return"bossExtra"===t.name}),o=n.effects.find(function(t){return"deathBat"===t.name}),l=n.effects.find(function(t){return"deathBoss"===t.name});if(t.about.stageNumber&&t.about.stageNumber==t.about.stageNumber){if(t.about.stageNumber<7)for(var u=0;u<t.about.stageNumber;u++)a(e,e.jsonData.essenceSettings.birds.health,e.jsonData.essenceSettings.birds.dmg,e.jsonData.essenceSettings.birds.name+u,e.jsonData.essenceSettings.birds.type,e.jsonData.essenceSettings.birds.x,e.jsonData.essenceSettings.birds.y,e.jsonData.essenceSettings.birds.sizeX,e.jsonData.essenceSettings.birds.sizeY,e.jsonData.essenceSettings.birds.frameCount,e.jsonData.essenceSettings.birds.frameArray,e.jsonData.enemyStartPosition.x,e.jsonData.enemyStartPosition.y,o);else if(t.about.stageNumber>=10)for(var h=0;h<t.about.stageExtraBossCount;h++)a(e,e.jsonData.essenceSettings.bossExtra.health,e.jsonData.essenceSettings.bossExtra.dmg,e.jsonData.essenceSettings.bossExtra.name+h,e.jsonData.essenceSettings.bossExtra.type,e.jsonData.essenceSettings.bossExtra.x,e.jsonData.essenceSettings.bossExtra.y,e.jsonData.essenceSettings.bossExtra.sizeX,e.jsonData.essenceSettings.bossExtra.sizeY,e.jsonData.essenceSettings.bossExtra.frameCount,e.jsonData.essenceSettings.bossExtra.frameArray,e.jsonData.enemyStartPosition.x,e.jsonData.enemyStartPosition.y,r);if(t.about.stageNumber>=7&&t.about.stageNumber<=15){for(var c=0;c<5;c++)a(e,e.jsonData.essenceSettings.birds.health,e.jsonData.essenceSettings.birds.dmg,e.jsonData.essenceSettings.birds.name+c,e.jsonData.essenceSettings.birds.type,e.jsonData.essenceSettings.birds.x,e.jsonData.essenceSettings.birds.y,e.jsonData.essenceSettings.birds.sizeX,e.jsonData.essenceSettings.birds.sizeY,e.jsonData.essenceSettings.birds.frameCount,e.jsonData.essenceSettings.birds.frameArray,e.jsonData.enemyStartPosition.x,e.jsonData.enemyStartPosition.y,o);for(var f=0;f<t.about.stageBossCount;f++)a(e,e.jsonData.essenceSettings.boss.health,e.jsonData.essenceSettings.boss.dmg,e.jsonData.essenceSettings.boss.name+f,e.jsonData.essenceSettings.boss.type,e.jsonData.essenceSettings.boss.x,e.jsonData.essenceSettings.boss.y,e.jsonData.essenceSettings.boss.sizeX,e.jsonData.essenceSettings.boss.sizeY,e.jsonData.essenceSettings.boss.frameCount,e.jsonData.essenceSettings.boss.frameArray,e.jsonData.enemyStartPosition.x,e.jsonData.enemyStartPosition.y,l)}else if(t.about.stageNumber>15)for(var p=0;p<t.about.stageNumber-5;p++)a(e,e.jsonData.essenceSettings.bossExtra.health,e.jsonData.essenceSettings.bossExtra.dmg,e.jsonData.essenceSettings.bossExtra.name+j,e.jsonData.essenceSettings.bossExtra.type,e.jsonData.essenceSettings.bossExtra.x,e.jsonData.essenceSettings.bossExtra.y,e.jsonData.essenceSettings.bossExtra.sizeX,e.jsonData.essenceSettings.bossExtra.sizeY,e.jsonData.essenceSettings.bossExtra.frameCount,e.jsonData.essenceSettings.bossExtra.frameArray,e.jsonData.enemyStartPosition.x,e.jsonData.enemyStartPosition.y,r)}}},{key:"updateGameStatus",value:function(t,e){this.about.stageNumber=-1,this.about.stageExtraBossCount=1,this.about.stageBossCount=-1,this.about.count=-1,this.fade=2,this.loadingPercent=0,t.countThrow=0,t.killCount=0,t.stat.points=0,t.SoundCount=0,e.enemy=[],t.bullets=[],e.bullets=[],e.coins=[],e.eat=[],t.stat.sprite.size[0]=34,t.stat.sprite.pos[0]=700,t.move.pos[0]=t.move.startPos[0],t.move.pos[1]=t.move.startPos[1]}},{key:"music",value:function(t){setTimeout(function(){t.effects.find(function(t){return"main"===t.name}).play(!0,1)},2500)}}]),t}(),d=function(){function t(){a(this,t),this.loadCount=1,this.jsonData=[],this.TextureStorage=[],this.SpriteStorage=[],this.SoundsStorage=[],this.enemy=[],this.bullets=[],this.coins=[],this.eat=[],this.upgrade=[],this.startRecord=[]}return o(t,[{key:"textureCache",value:function(t){return this.TextureStorage.push(t)}},{key:"SpriteCache",value:function(t){return this.SpriteStorage.push(t)}},{key:"SoundCache",value:function(t){return this.SoundsStorage.push(t)}},{key:"loading",value:function(t,e,i){if("Image"===t&&"texture"===i){var s=new Image;s.src=e,this.textureCache(s)}else if("Image"===t&&"sprite"===i){var n=new Image;n.src=e,this.SpriteCache(n)}if("Audio"===t){var a=new Audio;a.src=e,this.SoundCache(a)}}}]),t}(),g=function(){function t(e,i){a(this,t);this.gameTime=0,this.countThrow=0,this.killCount=0,this.SoundCount=0,this.bullets=[],this.stat={name:"player",gamerName:null,health:200,points:0,damage:25,whatDrop:!1,upgradeRate:!1,sprite:new b("player",e.SpriteStorage[0],[703,0],[31,34],2,[0,1]),bullets:new m},this.move={speeds:200,pos:[i.settings.width/2,i.settings.height/2],startPos:[385,-120],animationPos:[i.settings.width/2,i.settings.height/2]}}return o(t,[{key:"setHealth",value:function(t){return this.stat.health=t}},{key:"GameOver",value:function(t,e,i,s){t.stat.health<=0&&(i.enemy=[],!t.SoundCount&&e.about.stageNumber<20&&(s.effects.find(function(t){return"gameOver"===t.name}).play(!1,.5),t.SoundCount++),e.stopGame())}},{key:"Win",value:function(t,e,i){t.stat.health<0||i.enemy.length||e.about.count||(e.about.stageNumber++,e.about.count++)}}]),t}(),m=function(){function t(){a(this,t),this.lastFire=0,this.i=50,this.weapons={speed:320,active:!1}}return o(t,[{key:"useSkill",value:function(t,e,i,s){if(Date.now()-this.lastFire>300)return e.countThrow++,t.bullets.push({pos:{x:e.move.pos[0],y:e.move.pos[1]},direction:new Vector(i.coorddX,i.coorddY).normalize(),degree:0,sprite:this.createBullets(t),siz:[15,32]}),s.effects.find(function(t){return"shot"===t.name}).play(!1,.8),this.lastFire=Date.now(),this.weapons.active=!0}},{key:"createBullets",value:function(t){return new b("bull",t.SpriteStorage[0],[192.5,31],[32,36],0)}},{key:"createBulletsCustom",value:function(t,e,i){return new b("bull2",t.SpriteStorage[0],[e,i],[22,34],0)}}]),t}(),y=function(){function t(){a(this,t),this.enemySpeedX=1*w(),this.enemySpeedY=1*w(),this.DeathTimer=null,this.stat={name:"",type:"",collision:!1,getDmg:!1,health:null,damage:null,sprite:null,sizes:[32,20],onDeath:!1},this.bull={bullStorage:[],speed:null,speedY:null,pos:[0,0],on:!1,lastBull:null},this.move={speeds:10,pos:[0,0],randomMove:w()}}return o(t,[{key:"createEnemy",value:function(e,i,s,n,a,r,o,l,u,h,c,f,p,d){var g=new t(e,this,i,s,n,a,r,o,l,u,h,c,d);g.stat.name=n,g.stat.type=a,g.stat.health=i,g.stat.damage=s,g.move.pos[0]=f*S(),g.move.pos[1]=p*S(),g.sound=d,("boss"===g.stat.type||"bossExtra"===g.stat.type)&&g.enemySpeedY<0&&(r=452),("boss"===g.stat.type||"bossExtra"===g.stat.type)&&g.enemySpeedY>0&&(r=964),g.stat.sprite=new b("enemy",e.SpriteStorage[0],[r,o],[l,u],h,c),e.enemy.push(g)}}]),t}(),b=function(){function t(e,i,s,n,r,o,l,u){a(this,t),this.Saveframes=null,this.name=e,this.pos=s,this.size=n,this.speed=r,this.frames=o,this.index=0,this.url=i,this.once=u,this.x=null,this.y=null}return o(t,[{key:"update",value:function(t){this.index+=this.speed*t}},{key:"render",value:function(){var t;if(this.speed>0){var e,i=this.frames.length;if(this.index&&(e=Math.floor(this.index)),t=this.frames[e%i],this.once&&e>=i)return void(this.once=!0)}else t=0;return this.x=this.pos[0],this.y=this.pos[1],this.Saveframes=t,this.x+=t*this.size[0]}}]),t}(),v=function(){function t(){a(this,t);var e=this;this.name=null,this.sprite=null,this.pos=[],this.settingsItems={get name(){return e.name},set name(t){return e.name=t},get sprite(){return e.sprite}}}return o(t,[{key:"lucky",value:function(t){return Math.random()<t}},{key:"setSprite",value:function(t,e,i,s,n){return this.sprite=new b(this.name,t.SpriteStorage[0],[e,i],[s,n])}}]),t}();function w(){var t=[-1.2,-1,1,1.2];return t[Math.floor(Math.random()*t.length)]}function S(){var t=[.3,.6,.8,.9,1.2];return t[Math.floor(Math.random()*t.length)]}function x(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.blink=1,this.scaleValue=1,this.frameBlink=!0,this.view="xl",this.viewMode="full",this.viewDesktop="none",this.settings={width:this.width(),height:this.height(),textureW:this.width(),textureH:this.height(),openGate:0,countModal:0,drawInX:0,drawInY:0,mouse:0},this.bullets={spriteListBulletsPosition:[106,0],spritePlayerSizeW:14,spritePlayerSizeH:32},this.items={spriteItemSize:[15,15]},this.pause={RectPause:[this.settings.width/6,40],RectPauseSize:[this.settings.width/1.5,this.settings.height/1.4],TextStageName:[this.settings.width/2.1,100],Notification:[this.settings.width/2-5,135],Menu:[this.settings.width/2.1,450],pauseLink:[350,420],sizeLinkPause:[100,30]},this.menu={background:null,TitleGame:[this.settings.width/2,100],play:[this.settings.width/2,this.settings.height/2.5],rating:[this.settings.width/2,this.settings.height/1.8],myName:[40,this.settings.height-20],version:[this.settings.width-40,this.settings.height-20],sizeLinkPlay:[200,80],coordsLinkRating:[this.settings.width/2-120,this.settings.height/1.8-40],sizeLinkRating:[250,80]},this.rating={TitleGame:[this.settings.width/2,50],return:[this.settings.width/2,165],StrokeRectCoords:[this.settings.width/9.4,200],StrokeRectSize:[this.settings.width/1.3,this.settings.height/1.8],RectCoords:[this.settings.width/9.4,200],RectSize:[this.settings.width/1.3,this.settings.height/1.8],TitleName:[this.settings.width/8,235],TitlePoints:[this.settings.width/1.45,235],ratingListX:[this.settings.width/8,this.settings.height-50],ratingListPointsX:[this.settings.width/8,this.settings.height-50],returnLinkCoords:[this.settings.width/2-60,110],returnLinkSize:[110,70]},this.gameOver={TitleCoords:[this.settings.width/2,100],win:[this.settings.width/2,100],Points:[this.settings.width/2,150],Throw:[this.settings.width/2,200],killCount:[this.settings.width/2,250],menu:[this.settings.width/2.02,450],menuLinkCoords:[350,430],menuLinkSize:[110,30]},this.playGame={spriteTextureBorder:[5,610],spriteTexture:[5,5],gamePanelCoords:[0,542],gamePanelSize:[this.settings.width,80],hpTextPosition:[this.settings.width/3,588],hpBarSize:[375,588],hpBarBoorderCoords:[this.settings.width/2.7,570],hpBarBoorderSize:[204,25],PointsCoords:[-12,20],PointsSize:[45,45],PointsGetCoords:[0,560],PointsGetSize:[35,35],PointsTextCoords:[40,592],ModalTextWASD:[this.settings.width/2,35],ModalPress:[this.settings.width/2,65],Audio:[this.settings.width,460],pauseButton:[this.settings.width-40,this.settings.height-48],pauseLinkSize:[50,50]},this.loading={loadingText:[this.settings.width/4.7,this.settings.height/2]},this.drawBuffer={canvasBuffer:null,ctxBuffer:null},this.getCanvas={canvas:document.getElementById("arena")},this.getCtx={ctx:this.getCanvas.canvas.getContext("2d")}}var e,i,s;return e=t,(i=[{key:"render",value:function(){this.getCtx.ctx.drawImage(this.drawBuffer.canvasBuffer,this.settings.drawInX,this.settings.drawInY,this.settings.width,this.settings.height),this.drawBuffer.ctxBuffer.restore()}},{key:"renderEnemys",value:function(t){"player"!==t.stat.name&&(t.stat.sprite.x=t.stat.sprite.render(),this.drawBuffer.ctxBuffer.fillStyle="red",this.drawBuffer.ctxBuffer.font="bold 12px Aria",this.drawBuffer.ctxBuffer.fillText(t.stat.health+"HP",t.move.pos[0]-5,t.move.pos[1]-5),this.drawBuffer.ctxBuffer.drawImage(t.stat.sprite.url,t.stat.sprite.x,t.stat.sprite.pos[1],t.stat.sprite.size[0],t.stat.sprite.size[1],t.move.pos[0],t.move.pos[1],t.stat.sprite.size[1],t.stat.sprite.size[1]))}},{key:"renderItems",value:function(t){var e=this;t.coins.forEach(function(t){t.lucky&&(t.sprite.x=t.sprite.render(),e.drawBuffer.ctxBuffer.drawImage(t.settingsItems.sprite.url,t.sprite.x,t.sprite.pos[1],t.sprite.size[0],t.sprite.size[1],t.pos[0],t.pos[1],e.items.spriteItemSize[0],e.items.spriteItemSize[1]))}),t.eat.forEach(function(t){t.lucky&&(t.sprite.x=t.sprite.render(),e.drawBuffer.ctxBuffer.drawImage(t.settingsItems.sprite.url,t.sprite.x,t.sprite.pos[1],t.sprite.size[0],t.sprite.size[1],t.pos[0],t.pos[1],e.items.spriteItemSize[0],e.items.spriteItemSize[1]))}),t.upgrade.forEach(function(t){t.lucky&&(t.sprite.x=t.sprite.render(),e.drawBuffer.ctxBuffer.drawImage(t.settingsItems.sprite.url,t.sprite.x,t.sprite.pos[1],t.sprite.size[0],t.sprite.size[1],t.pos[0],t.pos[1],e.items.spriteItemSize[0],e.items.spriteItemSize[1]))})}},{key:"renderPlayer",value:function(t,e){e.fade<=0&&(t.stat.sprite.x=t.stat.sprite.render(),this.drawBuffer.ctxBuffer.drawImage(t.stat.sprite.url,t.stat.sprite.x,t.stat.sprite.pos[1],t.stat.sprite.size[0],t.stat.sprite.size[1],t.move.pos[0],t.move.pos[1],t.stat.sprite.size[1],t.stat.sprite.size[1]))}},{key:"fadeIn",value:function(t,e){this.drawBuffer.ctxBuffer.restore(),this.drawBuffer.ctxBuffer.save();var i=100/(this.settings.width/2/t.loadingPercent);this.drawBuffer.ctxBuffer.globalAlpha=t.fade,this.drawBuffer.ctxBuffer.drawImage(e.SpriteStorage[1],this.settings.drawInX,this.settings.drawInX,this.settings.width,this.settings.height),this.drawBuffer.ctxBuffer.strokeStyle="gold",this.drawBuffer.ctxBuffer.lineWidth=2,this.drawBuffer.ctxBuffer.strokeRect(this.settings.width/4,this.settings.height/2.5,this.settings.width/2,this.settings.height/6),this.drawBuffer.ctxBuffer.fillStyle="brown",this.drawBuffer.ctxBuffer.fillRect(this.settings.width/4,this.settings.height/2.5,t.loadingPercent,this.settings.height/6),this.drawBuffer.ctxBuffer.font="30px PIXI",this.drawBuffer.ctxBuffer.textAlign="center",this.drawBuffer.ctxBuffer.fillStyle="white",this.drawBuffer.ctxBuffer.fillText("Rendering... ".concat(i.toFixed(1)," %"),this.settings.width/2,this.settings.height/2),t.loadingPercent<this.settings.width/2&&(t.loadingPercent+=2.5),t.loadingPercent>=this.settings.width/2&&(t.fade-=.05),this.drawBuffer.ctxBuffer.restore()}},{key:"renderEnemyBulls",value:function(t){var e=t.bull;t.bull.on&&e.bullStorage.length&&(this.drawBuffer.ctxBuffer.restore(),this.drawBuffer.ctxBuffer.drawImage(t.bull.bullStorage[0].url,t.bull.bullStorage[0].pos[0],t.bull.bullStorage[0].pos[1],t.bull.bullStorage[0].size[0],t.bull.bullStorage[0].size[1],e.pos[0],e.pos[1],this.items.spriteItemSize[0],this.items.spriteItemSize[1]),this.render(),this.drawBuffer.ctxBuffer.restore())}},{key:"renderBulls",value:function(t,e,i){e.bullets.length&&(this.drawBuffer.ctxBuffer.setTransform(1,0,0,1,0,0),this.drawBuffer.ctxBuffer.save(),this.drawBuffer.ctxBuffer.translate(t.pos.x,t.pos.y),this.drawBuffer.ctxBuffer.rotate(2*t.degree*(Math.PI/180)),this.drawBuffer.ctxBuffer.drawImage(t.sprite.url,t.sprite.pos[0],t.sprite.pos[1],t.sprite.size[0],t.sprite.size[1],this.settings.drawInX,this.settings.drawInY,25,27),t.degree++,this.drawBuffer.ctxBuffer.restore())}},{key:"renders",value:function(t,e,i,s,n){var a=this;"play"===i.about.state&&t.stat.health<=0&&t.GameOver(t,i,e,n),("play"===i.about.state||"play-animation"===i.about.state)&&this.renderMouse(e,s),"wait"===i.about.state&&this.gameOverView(t,s,i),"rating"===i.about.state&&this.drawRatingList(e,t,s,t),"play"===i.about.state&&(e.enemy.forEach(function(t){a.renderEnemys(t),a.renderItems(e)}),this.renderPlayer(t,i),e.bullets.forEach(function(i){a.renderBulls(i,e,t)}),e.enemy.forEach(function(t){a.renderEnemyBulls(t)})),"play-animation"===i.about.state&&(i.fade>0&&this.fadeIn(i,e),i.fade<=0&&this.renderPlayer(t,i)),this.pauseMenuView(i,t,s,e),"menu"===i.about.state&&s&&this.DrawMenu(e,i,s),"pause"===i.about.state&&s&&(s.linki[0].selectName&&(i.about.state="menu"),s.linki[0].selectName&&this.DrawMenu(e,i,s)),this.render()}},{key:"pauseMenuView",value:function(t,e,i,s){if("pause"===t.about.state){var n=this.drawBuffer.ctxBuffer;n.restore(),n.save(),n.fillStyle="black",n.globalAlpha=.9,this.drawBuffer.ctxBuffer.drawImage(s.SpriteStorage[1],this.pause.RectPause[0],this.pause.RectPause[1],this.pause.RectPauseSize[0],this.pause.RectPauseSize[1]),n.strokeStyle="gold",n.globalAlpha=.9,n.strokeRect(this.pause.RectPause[0]+10,this.pause.RectPause[1]+10,this.pause.RectPauseSize[0]-20,this.pause.RectPauseSize[1]-20),n.fillStyle="yellow",n.textAlign="center",n.shadowColor="rgb(50,50,50)",n.shadowOffsetX=2,n.shadowOffsetY=3,n.font="50px PIXI",n.fillText("PAUSE",this.pause.TextStageName[0],this.pause.TextStageName[1]),n.fillStyle="gold",n.shadowColor="rgb(50,80,50)",n.textAlign="center",n.shadowOffsetX=2,n.shadowOffsetY=3,n.font="25px PIXI",n.fillText("If you leave the game, all saves will be lost.",this.pause.Notification[0],this.pause.Notification[1]),n.restore(),n.save(),n.fillStyle="yellow",n.shadowColor="brown",n.textAlign="center",n.font="35px PIXI",n.fillText("Throws: "+e.countThrow,this.gameOver.Throw[0]-20,this.gameOver.Throw[1]),n.fillText("Kills: "+e.killCount,this.gameOver.killCount[0]-20,this.gameOver.killCount[1]+10),i.checkFrame(i.linki[0])?n.fillStyle=i.linki[0].selectColor:n.fillStyle=i.linki[0].color,n.shadowOffsetX=2,n.shadowOffsetY=3,n.textAlign="center",n.font="40px PIXI",n.fillText("MENU",this.pause.Menu[0],this.pause.Menu[1]),this.render()}else this.drawBuffer.ctxBuffer.clearRect(0,0,this.settings.width,this.settings.health)}},{key:"DrawMenu",value:function(t,e,i,s){var n=this.drawBuffer.ctxBuffer;this.menu.background=n.createPattern(t.SpriteStorage[3],"repeat"),n.fillRect(this.settings.drawInX,this.settings.drawInY,this.settings.width,this.settings.height),n.fillStyle=this.menu.background,n.fillRect(this.settings.drawInX,this.settings.drawInY,this.settings.width,this.settings.height),n.fillStyle="rgb(255,215,0)",n.shadowColor="brown",n.shadowBlur=3,n.textAlign="center",n.textBaseline="middle",n.shadowOffsetX=6,n.shadowOffsetY=7,n.font="bold 100px PIXI",n.globalAlpha=this.blink,this.blink<=.5&&(this.frameBlink=!1),this.blink>=1&&(this.frameBlink=!0),this.frameBlink&&this.blink>.5&&(this.blink-=.01),!this.frameBlink&&1!=this.blink&&(this.blink+=.01),n.fillText("ARENA",this.menu.TitleGame[0],this.menu.TitleGame[1]),n.shadowOffsetX=0,n.shadowOffsetY=0,n.globalAlpha=1,n.shadowColor="black",n.font="100px PIXI",i.checkFrame(i.linki[1])&&(n.fillStyle=i.linki[1].selectColor),!i.checkFrame(i.linki[1])&&(n.fillStyle=i.linki[1].color),n.fillText("PLAY",this.menu.play[0],this.menu.play[1]),i.checkFrame(i.linki[2])&&(n.fillStyle=i.linki[2].selectColor),!i.checkFrame(i.linki[2])&&(n.fillStyle=i.linki[2].color),n.fillText("RATING",this.menu.rating[0],this.menu.rating[1]),"demo"===this.viewMode&&(n.fillStyle="lightblue",n.font="20px bold Aria",n.fillText("This is a demo game.",this.settings.width/2,this.settings.height-120),n.fillText("Your device doesn't support :(",this.settings.width/2,this.settings.height-100),n.fillText("Need width 760px and more for full.",this.settings.width/2,this.settings.height-80)),n.fillStyle="white",n.font="bold 14px Arial",n.fillText("© 2019",this.menu.myName[0],this.menu.myName[1]),n.fillStyle="white",n.font="bold 14px Arial",n.fillText("v0.0.5",this.menu.version[0],this.menu.version[1])}},{key:"drawRatingList",value:function(t,e,i){var s,n=this.drawBuffer.ctxBuffer,a=null,r=null,o="mobile"===this.view;!o&&(r=t.startRecord.length<8?t.startRecord.length:8),o&&(r=t.startRecord.length<5?t.startRecord.length:5),!o&&(a=275),o&&(a=Math.floor(350/1.5)),n.restore(),n.save(),n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.menu.background,n.fillRect(this.settings.drawInX,this.settings.drawInY,this.settings.width,this.settings.height),n.fillStyle=this.menu.background,n.fillRect(this.settings.drawInX,this.settings.drawInY,this.settings.width,this.settings.height),n.fillStyle="rgb(255,215,0)",n.shadowColor="brown",n.shadowBlur=3,n.shadowOffsetX=6,n.shadowOffsetY=7,n.font=o?"bold 60px PIXI":"bold 80px PIXI",o&&(this.rating.TitleGame[1]=40),o&&n.fillText("THE BEST",this.rating.TitleGame[0],this.rating.TitleGame[1]),!o&&n.fillText("THE BEST",this.rating.TitleGame[0],this.menu.TitleGame[1]),n.restore(),n.save(),(s=i.checkFrame(i.linki[3]))&&(n.fillStyle=i.linki[3].selectColor),!s&&(n.fillStyle=i.linki[3].color),n.font=o?"bold 40px PIXI":"bold 50px PIXI",o&&(this.rating.return[1]=120),n.fillText("RETURN",this.rating.return[0],this.rating.return[1]),n.strokeStyle="yellow",o&&(this.rating.StrokeRectCoords[1]=140),n.strokeRect(this.rating.StrokeRectCoords[0],this.rating.StrokeRectCoords[1],this.rating.StrokeRectSize[0],this.rating.StrokeRectSize[1]),n.fillStyle="black",o&&(this.rating.RectCoords[1]=140),n.fillRect(this.rating.RectCoords[0],this.rating.RectCoords[1],this.rating.RectSize[0],this.rating.RectSize[1]),n.textAlign="left",n.font="bold 45px PIXI",n.fillStyle="yellow",!o&&n.fillText("NAME",this.rating.TitleName[0],this.rating.TitleName[1]),o&&(n.textAlign="center"),o&&n.fillText("NAME",this.settings.width/2.1,this.rating.TitleName[1]/1.3),o&&"half-half"!==this.viewDesktop||(n.fillStyle="yellow",n.fillText("POINTS",this.rating.RectSize[0]-70,this.rating.TitlePoints[1])),n.font="bold 40px PIXI",n.fillStyle="yellow";for(var l=0;l<r;l++)o&&(n.textAlign="left"),this.rating.ratingListX[0]=this.rating.RectCoords[0]+10,n.fillText("".concat(l+1,". ")+t.startRecord[t.startRecord.length-(l+1)].name,this.rating.ratingListX[0],a),o&&"half-half"!==this.viewDesktop||n.fillText(t.startRecord[t.startRecord.length-(l+1)].points,this.rating.RectSize[0]-50,a),a+=32;n.textAlign="center",n.fillStyle="white",n.font="bold 14px Arial",n.restore(),n.save(),n.fillText("© 2019",this.menu.myName[0],this.menu.myName[1]),n.fillStyle="white",n.font="bold 14px Arial",n.fillText("v0.0.5",this.menu.version[0],this.menu.version[1])}},{key:"gameOverView",value:function(t,e,i){this.drawBuffer.ctxBuffer.save();var s=this.drawBuffer.ctxBuffer,n=e.checkFrame(e.linki[4]);s.fillStyle="grey",s.globalAlpha=.8,s.fillRect(0,0,this.settings.width,this.settings.height-75),s.fillStyle="red",s.textAlign="center",s.font="100px PIXI",i.about.stageNumber>=20&&t.stat.health>0&&s.fillText("W I N",this.gameOver.win[0],this.gameOver.win[1]),t.stat.health<=0&&s.fillText("GAME OVER",this.gameOver.TitleCoords[0],this.gameOver.TitleCoords[1]),s.shadowColor="brown",s.shadowOffsetX=2,s.shadowOffsetY=3,s.font="40px PIXI",s.fillStyle="yellow",s.shadowColor="brown",s.fillText("Points: "+t.stat.points,this.gameOver.Points[0],this.gameOver.Points[1]),s.fillText("Throws: "+t.countThrow,this.gameOver.Throw[0],this.gameOver.Throw[1]),s.fillText("Kills: "+t.killCount,this.gameOver.killCount[0],this.gameOver.killCount[1]),n&&(s.fillStyle=e.linki[4].selectColor),!n&&(s.fillStyle=e.linki[4].color),s.font="50px PIXI",s.fillText("MENU",this.gameOver.menu[0],this.gameOver.menu[1]),this.render()}},{key:"building",value:function(t,e,i){this.drawBuffer.canvasBuffer=document.createElement("canvas"),this.drawBuffer.ctxBuffer=this.drawBuffer.canvasBuffer.getContext("2d"),this.drawBuffer.canvasBuffer.setAttribute("width",this.settings.width),this.drawBuffer.canvasBuffer.setAttribute("height",this.settings.height);var s=this.drawBuffer.ctxBuffer;s.drawImage(t.TextureStorage[0],this.playGame.spriteTextureBorder[0],this.playGame.spriteTextureBorder[1],this.settings.textureW,this.settings.textureH,this.settings.drawInX,this.settings.drawInY,this.settings.textureW,this.settings.textureH),s.drawImage(t.TextureStorage[0],this.playGame.spriteTexture[0],this.playGame.spriteTexture[1],this.settings.textureW,this.settings.textureH,this.settings.drawInX,this.settings.drawInY,this.settings.textureW,this.settings.textureH),s.drawImage(t.SpriteStorage[0],-14,190,85,65,109,0,95,65),"play-animation"===i.about.state?(-50!==this.settings.openGate&&this.settings.openGate--,s.drawImage(t.SpriteStorage[0],-14,190,85,65,349,this.settings.openGate,95,65)):(0!==this.settings.openGate&&this.settings.openGate++,s.drawImage(t.SpriteStorage[0],-14,190,85,65,349,this.settings.openGate,95,65)),s.drawImage(t.SpriteStorage[0],-14,190,85,65,588,0,95,65);var n=this.drawBuffer.ctxBuffer.createLinearGradient(0,0,170,0);n.addColorStop(0,"rgb(105,105,105)"),n.addColorStop(.5,"rgb(128,128,128)"),n.addColorStop(1,"rgb(169,169,169)"),s.fillStyle=n,s.fillRect(this.playGame.gamePanelCoords[0],this.playGame.gamePanelCoords[1],this.playGame.gamePanelSize[0],this.playGame.gamePanelSize[1]),s.strokeStyle="blue",s.lineWidth=5,"mobile"===this.view&&(this.playGame.hpBarBoorderCoords[0]=this.settings.width/4),s.strokeRect(this.playGame.hpBarBoorderCoords[0],this.playGame.hpBarBoorderCoords[1],this.playGame.hpBarBoorderSize[0],this.playGame.hpBarBoorderSize[1]),s.fillStyle="crimson",e.stat.health<=0&&s.fillRect(this.playGame.hpBarBoorderCoords[0]+2,this.playGame.hpBarBoorderCoords[1]+2,0,20),!(e.stat.health<=0)&&s.fillRect(this.playGame.hpBarBoorderCoords[0]+2,this.playGame.hpBarBoorderCoords[1]+2,e.stat.health,20),s.fillStyle="white",s.font="bold 15px PIXI","mobile"!=this.view&&s.fillText(e.stat.health+"HP",this.playGame.hpBarSize[0],this.playGame.hpBarSize[1]),s.fillStyle="red",s.shadowColor="rgb(255,255,25)",s.shadowOffsetX=2,s.shadowOffsetY=3,s.font="bold 30px PIXI",s.fillText(i.about.stageNumber+" LVL",10,30),s.shadowOffsetX=0,s.shadowOffsetY=0,s.drawImage(t.SpriteStorage[0],this.playGame.PointsCoords[0],this.playGame.PointsCoords[1],this.playGame.PointsSize[0],this.playGame.PointsSize[1],this.playGame.PointsGetCoords[0],this.playGame.PointsGetCoords[1],this.playGame.PointsGetSize[0],this.playGame.PointsGetSize[1]),s.fillStyle="gold",s.font="bold 27px PIXI",s.fillText(e.stat.points,this.playGame.PointsTextCoords[0],this.playGame.PointsTextCoords[1]),s.drawImage(t.SpriteStorage[2],this.playGame.pauseButton[0],this.playGame.pauseButton[1],20,20),"play"===i.about.state&&0===this.settings.countModal&&(s.fillStyle="black",s.globalAlpha="0.8",s.fillRect(0,0,this.settings.width,100),s.textAlign="center",s.fillStyle="white",s.font="PIXI 30px bold",s.fillText("Move with the WASD keys",this.playGame.ModalTextWASD[0],this.playGame.ModalTextWASD[1]),s.textAlign="center",s.fillStyle="lightblue",s.font="PIXI 20px bold",s.fillText("Press any keys",this.playGame.ModalPress[0],this.playGame.ModalPress[1]),s.restore())}},{key:"loadingRender",value:function(t){this.getCtx.ctx.fillRect(this.settings.drawInX,this.settings.drawInY,this.settings.width,this.settings.height),this.getCtx.ctx.fillStyle="grey",this.getCtx.ctx.textAlign="center","mobile"!=this.view?this.getCtx.ctx.font="100px Aria bold":this.getCtx.ctx.font="45px Aria bold",this.getCtx.ctx.fillText("My project",this.settings.width/2,this.settings.height/2)}},{key:"renderMouse",value:function(t,e){this.drawBuffer.ctxBuffer.drawImage(t.SpriteStorage[0],255,192,65,65,e.coordsMouseX-32.5,e.coordsMouseY-32.5,65,65)}},{key:"buildingGetNameView",value:function(t,e){var i=t.createElement("input"),s=t.createElement("input"),n=t.createElement("input"),a=t.createElement("div"),r=t.createElement("div"),o=t.createElement("div");r.classList.add("modal-window"),o.classList.add("background-modal"),i.classList.add("name"),n.classList.add("btnName"),s.classList.add("cancelName"),a.classList.add("center"),i.setAttribute("type","text"),i.setAttribute("maxlength","11"),i.placeholder="NAME",n.setAttribute("type","button"),n.value="SAVE",s.setAttribute("type","button"),s.value="NO",a.appendChild(i),a.appendChild(n),a.appendChild(s),r.appendChild(a),o.appendChild(r),t.body.insertBefore(o,e)}},{key:"deleteGetNameView",value:function(t){t.querySelector(".background-modal").remove()}},{key:"height",value:function(){return window.screen.availHeight<620?(this.view="mobile",window.screen.availHeight):620}},{key:"width",value:function(){return window.screen.availWidth<800?(760<window.screen.availWidth&&window.screen.availWidth<800&&(this.viewDesktop="half-half"),window.screen.availWidth<760&&(this.viewMode="demo"),this.view="mobile",window.screen.availWidth-10):800}}])&&x(e.prototype,i),s&&x(e,s),t}();function E(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.count=0,this.canvasLeft=null,this.canvasTop=null,this.inputState={UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1,ESCAPE:!1}}var e,i,s;return e=t,(i=[{key:"setEvent",value:function(t,e,i,s,n,a){var r=this,o=document.getElementById("arena"),l=document.getElementsByClassName("name")[0];document.addEventListener("keydown",function(e){if("name"===e.target.className)return 0;if(0===t.settings.countModal&&"play"===s.about.state&&t.settings.countModal++,"play"===s.about.state||"pause"===s.about.state)return r.inputState.ESCAPE?(s.about.state="play",r.setKeyState(e.which,!1)):r.setKeyState(e.which,!0);e.preventDefault()},!1),document.addEventListener("keyup",function(t){if("play"===s.about.state||"pause"===s.about.state)return r.inputState.ESCAPE?void 0:r.setKeyState(t.which,!1);t.preventDefault()},!1),document.addEventListener("mousemove",function(t){t.target===o&&(r.canvasLeft=o.offsetLeft,r.canvasTop=o.offsetTop,n.coordsMouseX=t.pageX-r.canvasLeft,n.coordsMouseY=t.pageY-r.canvasTop,n.coorddX=n.coordsMouseX-e.move.pos[0],n.coorddY=n.coordsMouseY-e.move.pos[1])}),document.addEventListener("click",function(i){"btnName"===i.target.className&&""!==l.value?(getName(l.value,e),t.deleteGetNameView(document,i.target)):"cancelName"===i.target.className&&t.deleteGetNameView(document,i.target)},!1),t.getCanvas.canvas.addEventListener("click",function(o){if("loading"===s.about.state||"play-animation"===s.about.state)return void o.preventDefault();for(var l=n.linki,u=0;u<l.length;u++)n.checkFrame(l[u])&&l[u].Name===s.about.state?l[u].selectName=!0:l[u].selectName=!1;if("demo"===t.viewMode&&(n.linki[1].selectName=!1),"menu"===s.about.state||"rating"===s.about.state||"wait"===s.about.state)for(var h in r.inputState)r.inputState[h]=!1;else{if(r.inputState.ESCAPE||n.linki[5].selectName)return;e.stat.bullets.useSkill(i,e,n,a)}},!1)}},{key:"setKeyState",value:function(t,e){switch(t){case 65:this.inputState.LEFT=e;break;case 87:this.inputState.UP=e;break;case 68:this.inputState.RIGHT=e;break;case 83:this.inputState.DOWN=e;break;case 27:this.inputState.ESCAPE=e}}},{key:"inputs",value:function(t,e){this.inputState.RIGHT&&(e.stat.sprite.size[0]=34,e.stat.sprite.pos[0]=572.1,e.move.pos[0]+=e.move.speeds*t),this.inputState.LEFT&&(e.stat.sprite.size[0]=33,e.stat.sprite.pos[0]=828,e.stat.sprite.frames=[0,1],e.move.pos[0]-=e.move.speeds*t),this.inputState.UP&&(e.stat.sprite.size[0]=34,e.stat.sprite.pos[0]=444,e.move.pos[1]-=e.move.speeds*t),this.inputState.DOWN&&(e.stat.sprite.size[0]=34,e.stat.sprite.pos[0]=700,e.move.pos[1]+=e.move.speeds*t),this.inputState.UP&&this.inputState.RIGHT?(e.stat.sprite.size[0]=33,e.stat.sprite.pos[0]=510):this.inputState.UP&&this.inputState.LEFT&&(e.stat.sprite.size[0]=34,e.stat.sprite.pos[0]=891),this.inputState.DOWN&&this.inputState.LEFT?(e.stat.sprite.size[0]=33,e.stat.sprite.pos[0]=766):this.inputState.DOWN&&this.inputState.RIGHT&&(e.stat.sprite.size[0]=33,e.stat.sprite.pos[0]=636.5)}},{key:"dataBaseListener",value:function(t){l.collection("users").where("realPlayer","==",!0).onSnapshot(function(e){t.startRecord=[],e.forEach(function(e){t.startRecord.push(e.data())}),t.startRecord.sort(T)})}}])&&E(e.prototype,i),s&&E(e,s),t}();function T(t,e){return t.points<e.points?-1:t.points>e.points?1:0}function B(t,e,i,s,n,a){e.gameTime+=t,"play-animation"===s.about.state&&s.fade<=0&&function(t,e,i){t.move.animationPos[1]>=t.move.pos[1]?t.move.pos[1]+=t.move.speeds*i:e.about.state="play"}(e,s,t),"play"!==s.about.state&&"wait"!==s.about.state||(e.GameOver(e,s,i,a),e.Win(e,s,i)),s.pause(n[5])||"pause"===s.about.state||"menu"===s.about.state||"rating"===s.about.state||(function(t,e,i,s,n){e.stat.sprite.update(t),Date.now()-s.about.lastTimeBull>10&&(i.enemy.forEach(function(a){var r,o,l,u=a.bull.pos[0],h=a.bull.pos[1],c=e.move.pos[0],f=e.move.pos[1];if(a.stat.sprite.update(t),a.bull.bullStorage.length&&(a.bull.pos[0]<=40||a.bull.pos[0]>755||a.bull.pos[1]<60||a.bull.pos[1]>440))return a.bull.bullStorage.splice(0,1),a.bull.pos[0]=a.move.pos[0],void(a.bull.pos[1]=a.move.pos[1]);a.bull.bullStorage.length||("boss"===a.stat.type&&(r=new b("bull2",i.SpriteStorage[0],[192,2],[30,30],0)),"bossExtra"===a.stat.type&&(r=new b("bull2",i.SpriteStorage[0],[354,2],[30,30],0)),"common"===a.stat.type&&(r=new b("bull2",i.SpriteStorage[0],[324,0],[30,30],0)),a.bull.bullStorage.push(r),a.bull.speed=150,a.bull.speedY=150,a.bull.speed*=(o=[-1.2,-1,1,1.2],l=Math.floor(Math.random()*o.length),o[l]));if(a.bull.pos[0]+=a.bull.speed*t,a.bull.pos[1]+=a.bull.speedY*t,a.bull.on="true",N([u,h],[30,30],[c,f],[32,32])){var p=(new Date).getTime(),d=n.effects.find(function(t){return"damage"===t.name});p>s.about.lastTime+1e3*d.buffer.duration&&(d.play(!1,.8),s.about.lastTime=p),e.stat.sprite.pos[0]=956,e.stat.health--,e.move.pos[1]++;setTimeout(function(){e.stat.sprite.pos[0]=700},200)}!function(t){t&&t.move.pos[0]>700&&(t.enemySpeedX*=-1,("boss"===t.stat.type||"bossExtra"===t.stat.type)&&(t.stat.sprite.pos[0]=1226));t&&t.move.pos[0]<70&&(t.enemySpeedX*=-1,("boss"===t.stat.type||"bossExtra"===t.stat.type)&&(t.stat.sprite.pos[0]=712));t&&t.move.pos[1]<70&&(t.enemySpeedY*=-1,("boss"===t.stat.type||"bossExtra"===t.stat.type)&&(t.stat.sprite.pos[0]=964));t&&t.move.pos[1]>400&&(t.enemySpeedY*=-1,("boss"===t.stat.type||"bossExtra"===t.stat.type)&&(t.stat.sprite.pos[0]=452))}(a),a.move.pos[0]+=a.enemySpeedX,a.move.pos[1]+=a.enemySpeedY}),s.about.lastTimeBull=Date.now())}(t,e,i,s,a),function(t,e,i){i.bullets.forEach(function(i,s,n){var a=i;!function(t,e,i){var s=new Vector(t.pos.x,t.pos.y),n=t.direction.multiply(e.stat.bullets.weapons.speed*i);t.pos=s.add(n)}(i,e,t),(a.pos.y<50||a.pos.y>440||a.pos.x>727||a.pos.x<35)&&(n.splice(s,1),s--)})}(t,e,i),function(t,e){var i=[],s=[];t.bullets.forEach(function(n,a){i[0]=n.pos.x,i[1]=n.pos.y,t.enemy.forEach(function(n){s[0]=n.move.pos[0],s[1]=n.move.pos[1],N(s,[35,35],i,[35,35])&&n.stat.health>0&&(n.stat.health-=e.stat.damage,t.bullets.splice(a,1))})})}(i,e),function(t,e,i){var s=[],n=[];t.coins.forEach(function(t,a,r){s[0]=t.pos[0],s[1]=t.pos[1],n[0]=e.move.pos[0],n[1]=e.move.pos[1],N(n,[26,26],s,[26,26])&&(i.effects.find(function(t){return"money"===t.name}).play(!1,.8),e.stat.points+=10,r.splice(a,1))}),t.eat.forEach(function(t,a,r){s[0]=t.pos[0],s[1]=t.pos[1],n[0]=e.move.pos[0],n[1]=e.move.pos[1],N(n,[26,26],s,[26,26])&&(e.stat.health<200&&e.stat.health+.2*e.stat.health<200?(i.effects.find(function(t){return"eat"===t.name}).play(!1,.8),e.stat.health+=Math.floor(32),r.splice(a,1)):setTimeout(function(){r.splice(a,1)},2e3))}),t.upgrade.forEach(function(t,a,r){s[0]=t.pos[0],s[1]=t.pos[1],n[0]=e.move.pos[0],n[1]=e.move.pos[1],N(n,[30,30],s,[30,30])&&(i.effects.find(function(t){return"lvlUp"===t.name}).play(!1,.8),e.stat.damage+=5,r.splice(a,1))})}(i,e,a),function(t,e,i,s){t.enemy.forEach(function(n,a,r){if(n.stat.health<=0){if(!1===n.stat.onDeath){if(n.stat.onDeath=!0,e.stat.whatDrop=Math.random()<.5,e.stat.upgradeRate=Math.random()<.05,function(t){t.stat.sprite.once=!0,t.stat.sprite.speed=10,t.stat.sprite.index=0,t.stat.sprite.Saveframes=0,t.enemySpeedX=0,t.enemySpeedY=0,t.bull.on=!1,t.bull.bullStorage=[]}(n),"common"===n.stat.type&&(n.stat.sprite.pos[0]=960),"common"===n.stat.type&&(n.stat.sprite.pos[1]=102),"boss"===n.stat.type&&(n.stat.sprite.pos[0]=1540),"boss"===n.stat.type&&(n.stat.sprite.pos[1]=232),"boss"===n.stat.type&&(n.stat.sprite.frames=[0,1,2]),"bossExtra"===n.stat.type&&(n.stat.sprite.pos[0]=1542),"bossExtra"===n.stat.type&&(n.stat.sprite.pos[1]=298),"bossExtra"===n.stat.type&&(n.stat.sprite.frames=[0,1,2]),e.stat.whatDrop){var o=new v;o.settingsItems.name="coin",o.lucky(.7)?(o.setSprite(t,69,30,26,37),o.pos[0]=n.move.pos[0],o.pos[1]=n.move.pos[1],t.coins.push(o)):o=null}else{var l=new v;l.settingsItems.name="eat",l.lucky(.5)?(l.setSprite(t,95,30,39,40),l.pos[0]=n.move.pos[0],l.pos[1]=n.move.pos[1],t.eat.push(l)):l=null}if(e.stat.upgradeRate=!0,e.stat.upgradeRate){var u=new v;u.settingsItems.name="scroll",u.lucky(.2)?(u.setSprite(t,128,192,42,44),u.pos[0]=n.move.pos[0]+5,u.pos[1]=n.move.pos[1]+5,t.upgrade.push(u)):u=null}e.killCount++,n.sound.play(!1,1)}n.stat.sprite.index>=n.stat.sprite.frames.length&&(n.DeathTimer=null,r.splice(a,1),e.stat.points+=25)}!function(t,e,i,s){if(t&&N([t.move.pos[0],t.move.pos[1]],[30,30],[e.move.pos[0],e.move.pos[1]],[32,32]))if(e.stat.health>-1){e.stat.sprite.pos[0]=956;var n=(new Date).getTime(),a=i.effects.find(function(t){return"damage"===t.name});n>s.about.lastTimeColl+1e3*a.buffer.duration&&(a.play(!1,.8),s.about.lastTimeColl=n),e.stat.health--,e.move.pos[1]++;setTimeout(function(){e.stat.sprite.pos[0]=700},0)}else e.stat.health=0}(n,e,i,s)})}(i,e,a,s))}function N(t,e,i,s){return n=t[0],a=t[1],r=t[0]+e[0],o=t[1]+e[1],l=i[0],u=i[1],h=i[0]+s[0],c=i[1]+s[1],!(r<=l||n>h||o<=u||a>c);var n,a,r,o,l,u,h,c}function P(t,e,i,s,n,a){this.url=t,this.Name=e,this.pos=[i,s],this.length=[n,a],this.color="red",this.selectColor="rgb(255,140,0)",this.selectName=!1}(function(){document.getElementById("arena").classList.add("canvasInit");var t=null,e=null,s=null,n=new c;n.init(),n.load("audio/main.mp3","additional"),n.load("audio/shot.mp3","shot"),n.load("audio/Fly_A_Kite.mp3","main"),n.load("audio/money.wav","money"),n.load("audio/eat.wav","eat"),n.load("audio/damage.wav","damage"),n.load("audio/death_boss.wav","deathBoss"),n.load("audio/death-bat.mp3","deathBat"),n.load("audio/death-bossExtra.wav","bossExtra"),n.load("audio/gameOver.wav","gameOver"),n.load("audio/lvl.mp3","lvl"),n.load("audio/lvlUP.wav","lvlUp"),n.load("audio/lvlUP.wav","lvlUp2"),n.load("audio/select.wav","select"),console.log(n);var a=new p,r=new k,o=new _,l=new f,m=new d,b=new h;!localStorage.IP&&b.getIP(m);var v=new u;v.updateLimit(),b.getSpriteData(m),r.getCanvas.canvas.setAttribute("width",r.settings.width),r.getCanvas.canvas.setAttribute("height",r.settings.height),"mobile"===r.view&&r.getCanvas.canvas.classList.add("scale"),"mobile"!=r.view?(l.linki.push(new P("PAUSE","pause",r.pause.pauseLink[0],r.pause.pauseLink[1],r.pause.sizeLinkPause[0],r.pause.sizeLinkPause[1])),l.linki.push(new P("PLAY","menu",r.menu.play[0]-85,r.menu.play[1]-45,r.menu.sizeLinkPlay[0],r.menu.sizeLinkPlay[1])),l.linki.push(new P("RATING","menu",r.menu.coordsLinkRating[0],r.menu.coordsLinkRating[1],r.menu.sizeLinkRating[0],r.menu.sizeLinkRating[1])),l.linki.push(new P("RETURN","rating",r.rating.returnLinkCoords[0],r.rating.returnLinkCoords[1],r.rating.returnLinkSize[0],r.rating.returnLinkSize[1])),l.linki.push(new P("MENU","wait",r.gameOver.menuLinkCoords[0],r.gameOver.menuLinkCoords[1],r.gameOver.menuLinkSize[0],r.gameOver.menuLinkSize[1])),l.linki.push(new P("PAUSE-MENU","play",r.playGame.pauseButton[0],r.playGame.pauseButton[1],r.playGame.pauseLinkSize[0],r.playGame.pauseLinkSize[1]))):(l.linki.push(new P("PAUSE","pause",r.pause.pauseLink[0],r.pause.pauseLink[1],100,30)),l.linki.push(new P("PLAY","menu",r.menu.play[0]-85,r.menu.play[1]-45,200,80)),l.linki.push(new P("RATING","menu",r.menu.coordsLinkRating[0],r.menu.coordsLinkRating[1],250,80)),l.linki.push(new P("RETURN","rating",r.rating.return[0]-40,r.rating.returnLinkCoords[1]-10,r.rating.returnLinkSize[0],r.rating.returnLinkSize[1]))),m.loading("Image","img/texture.png","texture"),m.loading("Image","img/sheet_objects_heroes.png","sprite"),m.loading("Image","img/menu_800x600.jpg","sprite"),m.loading("Image","img/pause.png","sprite"),m.loading("Image","img/box_background.png","sprite"),m.loading("Image","img/box.png","sprite"),r.loadingRender(m);var w=new y,S=new g(m,r);function x(){e=Date.now(),s=(e-t)/1e3,function(t,e,i){l.linki.slice(1,l.linki.length).some(function(t){return t.selectName})&&i.effects.find(function(t){return"select"===t.name}).play(!1,1),l.linki[1].selectName&&a.startGameAnimation(t,e,l.linki[1],i),l.linki[2].selectName&&a.ratingGame(l.linki[2]),l.linki[3].selectName&&a.mainMenu(l.linki[3]),"demo"!=r.viewMode&&(l.linki[4].selectName||l.linki[0].selectName)&&a.mainMenu(l.linki[4],i),"demo"!=r.viewMode&&l.linki[5].selectName&&a.pause(l.linki[5],o.inputState.ESCAPE)}(m,S,n),function(t,e){"menu"===a.about.state&&(e.setHealth(200),a.setRequstCount(0))}(0,S),function(t,e,i,s){"play-animation"===i.about.state&&r.building(t,e,i),"play"!==i.about.state||t.enemy.length||(i.about.stageNumber>=20&&e.setHealth(0),i.about.stageNumber>=10?(i.about.stageNumber++,i.about.stageBossCount++,i.about.stageExtraBossCount++):i.about.stageNumber>=7&&(i.about.stageNumber++,i.about.stageBossCount++),i.about.stageNumber<7&&i.about.stageNumber++,i.spawnAndLvling(i,t,w,i.about.stageNumber,s))}(m,S,a,n),a.pause(l.linki[5],o.inputState.ESCAPE)||"play"!==a.about.state||o.inputs(s,S),B(s,S,m,a,l.linki,n),function(t,e){"pause"===t.about.state&&!e.inputState.ESCAPE&&(e.inputState.ESCAPE=!0)}(a,o),function(t,e,i){var s;"play"===t.about.state&&((s=i).move.pos[0]<=35&&(s.move.pos[0]=35),s.move.pos[0]>=727&&(s.move.pos[0]=727),s.move.pos[1]<=55&&(s.move.pos[1]=55),s.move.pos[1]>=440&&(s.move.pos[1]=440)),("play"===t.about.state||"wait"===t.about.state)&&r.building(e,i,t)}(a,m,S),r.renders(S,m,a,l,n),function(t,e,i,s){if("wait"===t.about.state&&0===t.about.requstCount&&e.stat.health<=0){localStorage.name&&(e.stat.gamerName=localStorage.name),!localStorage.name&&(e.stat.gamerName="player"+Math.random().toFixed(3).toString());var n="_id"+i.startRecord.length,a={result:{name:e.stat.gamerName,points:e.stat.points,id:n.slice(1,n.length),ip:localStorage.IP}};localStorage.setItem("result",JSON.stringify(a)),v.updateUserData(localStorage.IP,n,e.stat.gamerName,e.stat.points,i),t.about.requstCount++}}(a,S,m),t=e,requestAnimationFrame(x)}m.enemy.forEach(function(){m.enemy[i].bull.pos[0]=m.enemy[i].move.pos[0],m.enemy[i].bull.pos[1]=m.enemy[i].move.pos[1],m.enemy[i].enemySpeed*=getRandomPull()}),!localStorage.name&&r.buildingGetNameView(document,r.getCanvas.canvas),setTimeout(function(){a.about.state="menu",requestAnimationFrame(x)},3e3),o.setEvent(r,S,m,a,l,n),r.building(m,S,a),o.dataBaseListener(m)})()}]);
//# sourceMappingURL=http://localhost:9001/../main.js.map